#!/usr/bin/env bash

[ "$1" = "-h" ] && {
	echo "Usage: $(basename "$0") [-i]
  -i   launch interactive shell after exiting ${EDITOR:-vim}"
	exit 0
}

DIRS=(
	"$HOME/Projects"
	"$HOME/suckless"
	"$HOME/Downloads/git"
)

DEST=$(find "${DIRS[@]}" -type d -maxdepth 1 -mindepth 1 2> /dev/null |
	fzf --preview "tree -C {}" \
		--bind "ctrl-j:down,ctrl-k:up,alt-j:preview-down,alt-k:preview-up")

[ -z "$DEST" ] && exit 1

cd "$DEST" || exit
${EDITOR:-vim}
[ "$1" = "-i" ] && $SHELL
