#!/usr/bin/env bash

[ "$1" = "-h" ] && {
	echo "Usage: ${0##*/} [-i]
  -i   launch interactive shell after exiting ${EDITOR:-vim}"
	exit 0
}

DIRS=(
	# exact directories
)

SCAN_DIRS=(
	"$HOME/Downloads/git"
	"$HOME/Projects"
	"$HOME/suckless"
	"$XDG_CONFIG_HOME"
)

while IFS= read -r d; do
	DIRS+=("$d")
done < <(find "${SCAN_DIRS[@]}" -mindepth 1 -maxdepth 1 -type d 2> /dev/null)

DEST=$(printf "%s\n" "${DIRS[@]}" |
	fzf --preview "tree -C {}" \
		--bind "ctrl-j:down,ctrl-k:up,alt-j:preview-down,alt-k:preview-up")

[ -z "$DEST" ] && exit 2

cd "$DEST" || exit 2
${EDITOR:-vim}
[ "$1" = "-i" ] && $SHELL
