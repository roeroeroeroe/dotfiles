#!/usr/bin/env bash

[ -z "$1" ] && {
	wpctl get-volume @DEFAULT_SINK@ 2> /dev/null | awk '{
		if ($3) {
			gsub(/\[|\]/, "", $3)
			print $3
		} else print $2 * 100 "%"}'
	exit 0
}

step="0.05"

case "$1" in
	-) wpctl set-volume @DEFAULT_SINK@ $step- 2> /dev/null ;;
	+) wpctl set-volume @DEFAULT_SINK@ $step+ 2> /dev/null;;
	mute) wpctl set-mute @DEFAULT_SINK@ toggle 2> /dev/null;;
	*) exit 1 ;;
esac

kill -36 $(pidof slstatus) # sb volume
