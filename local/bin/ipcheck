#!/usr/bin/env bash

while read -r _ iface _ ip; do
	[ -e "/sys/class/net/$iface/device" ] || continue
	printf "%s: %s -> " "$iface" "${ip%%/*}"
	printf "%s\n" "$(curl -sm 5 --interface "$iface" https://api.ipify.org)"
done < <(ip -4 -o a)
